{% assign sub-nav-tabs = site.data.sub-nav.pages %}

{% if sub-nav-tabs %}

    {% assign page-base =  page.url | split:'/' %}
    
    {% for each in sub-nav-tabs %}
        {% for each-url in each.urls %}
            {% if each-url == page.url or each.url == page-base[1] %}
                {% assign tab-list = each.list %}
            {% endif %}
        {% endfor %}
    {% endfor %}
    
    
    {% if tab-list %}
        <ul class="nav nav-pills nav-stacked" id="stacked-nav">
            {% for tab in tab-list %}
                <li class="{% if page-base[1] == tab.base  %}active {% elsif page.url == tab.url or tab.active %}active {% endif %}side-nav-button">
                    <a href="{{tab.url}}" role="link">
                        {% if tab.icon %}
                        <div class="ext-left">
                            <img src="{% asset_path '{{tab.icon}}' %}" class="developer-services-icon" alt="{{tab.title}} Icon"/>
                        </div>
                        <div class="ext-right">
                            {{ tab.title}} {% if tab.external %}<i class="glyphicon glyphicon-new-window pull-right"></i>{% endif %}
                        </div>
                        {% else %}
                            {{ tab.title}} {% if tab.external %}<i class="glyphicon glyphicon-new-window pull-right"></i>{% endif %}
                        {% endif %}
                    </a>
                </li>
            {% endfor %}
        </ul>
        
    {% elsif custom-content %}
        Custom include to be displayed.
        {% include {{custom-content}}.html %}
    {% else %}
        No sidebar content found - please add to _data/sidebar.html. More information available <a href="/jekyll/includes/sidebar/">here</a>.
    {% endif %}
{% else %}
    No sidebar settings found - please create a _data/sidebar.yml data file. More information available <a href="/jekyll/includes/sidebar/">here</a>.
{% endif %}
